!function(e){function t(t){var n=jQuery(t.target).attr("data-filter-key");n||(n=e("#oc_theme_filter").find(".oc-active-filter").attr("data-filter-key"));var r,s,d=e(".pagination-item.current").attr("data-request_page"),l=e(".theme-browser").attr("data-item_count"),c=null,m=Math.ceil(e("#theme-browser-page-1 ."+n).length/l);"oc_theme_filter"===e(t.target).parent().attr("id")&&(d=1,a(m),e(".oc-active-filter").removeClass("oc-active-filter"),e(t.target).addClass("oc-active-filter")),o(e(".all")),"all"!==n?(o(jQuery(".one-theme").not(jQuery("."+n))),m>1?(r=(d-1)*l,s=d*l,c=e("."+n).slice(r,s)):c=e("."+n),i(jQuery(c))):i(e(".page-"+d))}function a(t){e(".theme-browser-pagination .current").removeClass("current"),e(".theme-browser-pagination .first").addClass("current"),e(".theme-browser-pagination a").hide(),t>1&&e(".theme-browser-pagination a").slice(0,t).show()}function i(t){e(t).removeClass("hidden_theme"),e(".theme-browser-page").hide(),e(".theme-browser-page-filtered").show().append(e(t).clone())}function o(t){e(".theme-browser-page-filtered").find(t).remove()}function n(e){for(var t=window.location.search.substring(1),a=t.split("&"),i=0;i<a.length;i++){var o=a[i].split("=");if(o[0]==e)return o[1]}return!1}function r(t){t&&1==t?e(".inline_badge").show():e(".inline_badge").hide()}function s(){TB_WIDTH=75*e(window).width()/100,TB_HEIGHT=85*e(window).height()/100,e("#TB_window").css({marginLeft:"-"+parseInt(TB_WIDTH/2,10)+"px",width:TB_WIDTH+"px"}),e("#TB_window").css({marginTop:"-"+parseInt(TB_HEIGHT/2,10)+"px",height:TB_HEIGHT+"px"})}function d(t,a,i){var o,n="",r=t,s=e("#theme-browser-page-1").find(e('[data-index="'+r+'"]'));e("#theme-browser-page-1").find(e('[data-index="'+r+'"]')).length,n=e(s).find(e(".theme-action")).find("[data-theme_slug]").data("theme_slug"),isPremiumInt=e(s).data("is-premium")||"0","0"==isPremiumInt?o="false":"1"==isPremiumInt&&(o="true"),n&&(themeName=n.trim()),oc_trigger_log({actionType:"wppremium_preview_theme",isPremium:o,theme:n,referrer:i})}e(document).ready(function(){function a(t){var a=e(t),i=e(t).parents(".one-theme:first");e(i).addClass("active");var o=e(t).attr("data-name"),n=e(t).attr("data-theme_slug"),r=e(t).attr("data-redirect"),s=onecom_vars.network;if(void 0!==o&&""!=o){void 0===s&&(s=!1);var d={action:o,theme_slug:n,redirect:r,network:s};e(i).addClass("active"),e.post(ajaxurl,d,function(t){var o=e.parseJSON(t);if(void 0!==o.type&&"redirect"==o.type)window.location=o.url;else{e(".onecom-notifier").html(o.message).attr("type",o.type).addClass("show");var n=5e3;"success"==o.type&&(e(i).addClass("installed"),e(a).removeClass("one-install").addClass("one-installed"),e(a).find(".action-text").remove(),e(a).find("> span").append(o.button_html),e(a).attr("data-name","onecom_activate_theme"),n=1500),setTimeout(function(){e(".onecom-notifier").removeClass("show"),e(".loading-overlay.fullscreen-loader").removeClass("show")},n)}})}}screenshotPreview(),e(".onecom-move-up").length>0&&e(".onecom-move-up").click(function(){return e("html, body").animate({scrollTop:0},"slow"),!1}),e(document).on("click",".one-install, .one-installed",function(){e(".loading-overlay.fullscreen-loader").addClass("show");var t=e(this),i=1==e(this).parents(".one-theme.theme").first().attr("data-is-premium")?"ptheme":"stheme",o=location.search;oc_validate_action(i).then(function(n){var r,s,d;if("ptheme"===i&&(r="true"),"stheme"===i&&(r="false"),"onecom_install_theme"===t.data("name")&&(s="install",d="wppremium_install_theme"),"onecom_activate_theme"===t.data("name")&&(s="activate",d="wppremium_activate_theme"),"success"===n.status)return a(t),oc_trigger_log({actionType:d,isPremium:r,theme:t.data("theme_slug"),referrer:o}),!0;"failed"===n.status?(jQuery("#oc_um_overlay").show(),ocSetModalData({isPremium:r,feature:"theme",theme:t.data("theme_slug"),featureAction:s,referrer:o}),e(".loading-overlay.fullscreen-loader").removeClass("show")):n.msg&&oc_alert(n.msg,"error",5e3)})}),e(document).on("click",".install-now, .activate-plugin-ajax",function(t){t.preventDefault();var a=e(this),i=e(this).parents(".one-plugin-card:first"),o=e(this).attr("data-download_url"),n=e(this).attr("data-slug"),r=e(this).attr("data-name"),s=e(this).attr("data-action"),d=e(this).attr("data-redirect"),l=void 0!==e(this).attr("data-plugin_type")?e(this).attr("data-plugin_type"):"";e(".loading-overlay.fullscreen-loader").addClass("show");var c={action:s,plugin_slug:n,plugin_name:r,download_url:o,plugin_type:l,redirect:d};e.post(ajaxurl,c,function(t){var o=e.parseJSON(t);if(console.log(o),void 0!==o.type&&"redirect"==o.type)window.location=o.url;else{e(".onecom-notifier").html(o.message).attr("type",o.type).addClass("show");var n=5e3;"success"==o.type&&(e(i).addClass("activate"),e(a).after(o.button_html),e(a).remove(),n=1500),setTimeout(function(){e(".onecom-notifier").removeClass("show"),e(".loading-overlay.fullscreen-loader").removeClass("show")},n)}})}),e(".pagination-item").click(function(a){a.preventDefault(),e(this).is(".current")||(e(".pagination-item").removeClass("current"),e(this).addClass("current"),t(a))});var i=e("#one-confirmation"),o=i.attr("data-yes_string"),n=i.attr("data-no_string");i.dialog({dialogClass:"wp-dialog wp-one-dialog",modal:!0,autoOpen:!1,closeOnEscape:!0,width:"25%",hide:{effect:"explode",duration:1e3},resizable:!1,buttons:[{text:n,class:"button",click:function(){e(this).dialog("close")}},{text:o,class:"button button-primary",click:function(){var t=e(this).data("element"),a=e(t).parents("form:first");e(a)[0].submit(),e(this).dialog("close")}}]}),e(".one-deactivate-plugin").click(function(e){e.preventDefault(),i.data("element",this).dialog("open")}),e(".discouraged-modal-close").click(function(){e("#one-confirmation").dialog("close")}),e(".one-theme").hover(function(){e(this).addClass("active")},function(){e(this).removeClass("active")}),e("#oc_theme_filter li").click(function(e){t(e)}),e("#oc_theme_filter_select").change(function(t){var a=e(this).val(),i=e('li[data-filter-key="'+a+'"]').text();e('li[data-filter-key="'+a+'"]').trigger("click"),e(".oc_select_wrapper span").text(i)})}),e(window).scroll(function(){onecom_move_up_toggle()}),e(window).load(function(){onecom_move_up_toggle()}),window.onpopstate=function(t){if(void 0!==t&&null!=t.state)var a=t.state.paged;else{var a=n("paged");void 0!==a&&""!=a&&null!=a||(a=1)}e(".pagination-item").each(function(t,i){if(e(i).attr("data-request_page")==a)return void e(i).trigger("click")})},this.screenshotPreview=function(){xOffset=10,yOffset=30,e(".one-screenshot").hover(function(t){this.t=this.title,this.title="";var a=""!=this.t?"<br/>"+this.t:"";e("body").append("<p id='one-screenshot'><img src='"+e(this).attr("data-preview")+"' alt='url preview' />"+a+"</p>"),e("#screenshot").css("top",t.pageY-xOffset+"px").css("left",t.pageX+yOffset+"px").fadeIn("fast")},function(){this.title=this.t,e("#one-screenshot").remove()}),e(".one-screenshot").mousemove(function(t){e("#one-screenshot").css("top",t.pageY-xOffset+"px").css("left",t.pageX+yOffset+"px")})},e(window).on("resize",s),e(document).on("thickbox:iframe:loaded",function(t){s(),e("#TB_iframeContent").contents().find("head").append(e("<style type='text/css'> .plugin-install-php #plugin-information-footer {display:none !important;} </style>"))}),e(document).on("click",".preview_link",function(){var t=e(this).parents(".one-theme:first"),a=e(".theme-browser > div.one-theme").length,i=e(this).attr("data-demo-url");e("iframe").attr("src",i);var o=e(this).attr("data-id"),n=e(this).closest(".one-theme").next(".one-theme").find(".preview_link").attr("data-id");e(".header_btn_bar .next").attr("data-demo-id",n);var s=e(this).closest(".one-theme").prev(".one-theme").find(".preview_link").attr("data-id");e(".header_btn_bar .previous").attr("data-demo-id",s),r(e(this).parents(".one-theme:first").attr("data-is-premium")),e(".header_btn_bar .theme-info").attr("data-theme-count",a),e(".header_btn_bar .theme-info").attr("data-active-demo-id",o),e(".header_btn_bar .preview-install-button").attr("data-active-demo-id",o),e(".header_btn_bar .next").removeAttr("style"),e(".header_btn_bar .previous").removeAttr("style");var l=e(this).attr("data-id");0===e("#demo-"+l).closest(".one-theme").prev(".one-theme").length&&(e(".header_btn_bar .previous").css({opacity:"0.5",cursor:"initial"}),e(".header_btn_bar .previous").attr("data-demo-id","0"));var l=e(this).attr("data-id");0===e("#demo-"+l).closest(".one-theme").next(".one-theme").length&&(e(".header_btn_bar .next").css({opacity:"0.5",cursor:"initial"}),e(".header_btn_bar .next").attr("data-demo-id","0")),e(t).hasClass("installed")?e(".header_btn_bar").find(".preview-install-button").hide():e(".header_btn_bar").find(".preview-install-button").show(),tb_show("Preview Popup","#TB_inline?width=full&height=full&inlineId=thickbox_preview&modal=true&class=thickbox",null),e("body").addClass("preview_page"),d(l,"preview",location.search)}),e(document).on("click",".close_btn",function(){tb_remove(),setTimeout(function(){e("body").removeClass("preview_page")},500)}),e(document).on("click",".one-dialog-close",function(){tb_remove()}),e(document).on("click",".preview-install-button",function(){var t=e(this).attr("data-active-demo-id"),a=null;e(".one-theme").each(function(i,o){if(e(o).find(".preview_link").attr("data-id")===t)return a=o,!1}),null!=a&&(e("html, body").stop().animate({scrollTop:e(a).offset().top-64},300),e(".close_btn").trigger("click"),e(a).find(".one-install").trigger("click"))}),e(document).on("click","#desktop",function(){e(".preview-container .phone-content").removeClass("phone-content").addClass("desktop-content"),e(".preview-container .preview span").remove(".screen-rotate"),e(".preview-container").removeClass("scroll"),e(".preview-container iframe").removeClass("horizontal"),e(".desktop-content").removeClass("horizontal"),e("#desktop").addClass("current"),e("#mobile").removeClass("current")}),e(document).on("click","#mobile",function(){e(".preview-container .desktop-content").removeClass("desktop-content").addClass("phone-content"),e(".preview-container").addClass("scroll"),e(".preview-container .preview").append('<span class="screen-rotate"></span>'),e("#desktop").removeClass("current"),e("#mobile").addClass("current")}),e(document).on("click",".screen-rotate",function(){e(".preview-container iframe").toggleClass("horizontal"),e(".phone-content").toggleClass("horizontal")}),e(document).on("click",".header_btn_bar .next",function(){var t=e(this).attr("data-demo-id"),a=e("#preview_box .theme-info").attr("data-active-demo-id"),i=e("#demo-"+t).closest(".one-theme").next(".one-theme").length;if(e(".header_btn_bar .preview-install-button").attr("data-active-demo-id",t),d(t,"navigation",location.search),r(e('[data-index="'+t+'"]').attr("data-is-premium")),"0"===t)event.stopPropagation();else if(0===i){e(this).css({opacity:"0.5",cursor:"initial"}),e(this).attr("data-demo-id",0),e(".header_btn_bar .previous").attr("data-demo-id",a);var o=e("#demo-"+t).attr("data-demo-url"),n=e("#demo-"+t).parents(".one-theme:first");e("iframe").attr("src",o),e(".header_btn_bar .theme-info").attr("data-active-demo-id",t)}else{e(".header_btn_bar .previous").removeAttr("style");var o=e("#demo-"+t).attr("data-demo-url"),n=e("#demo-"+t).parents(".one-theme:first");e("iframe").attr("src",o);var s=e("#demo-"+t).closest(".one-theme").next(".one-theme").find(".preview_link").attr("data-id");e(this).attr("data-demo-id",s),e(".header_btn_bar .previous").attr("data-demo-id",a),e(".header_btn_bar .theme-info").attr("data-active-demo-id",t)}e(n).hasClass("installed")?e(".header_btn_bar").find(".preview-install-button").hide():e(".header_btn_bar").find(".preview-install-button").show()}),e(document).on("click",".header_btn_bar .previous",function(){var t=e(this).attr("data-demo-id"),a=e("#preview_box .theme-info").attr("data-active-demo-id"),i=e("#demo-"+t).closest(".one-theme").prev(".one-theme").length;if(e(".header_btn_bar .preview-install-button").attr("data-active-demo-id",t),d(t,"navigation",location.search),r(e('[data-index="'+t+'"]').attr("data-is-premium")),"0"===t)event.stopPropagation();else if(0===i){e(this).css({opacity:"0.5",cursor:"initial"}),e(this).attr("data-demo-id",0),e(".header_btn_bar .next").attr("data-demo-id",a);var o=e("#demo-"+t).attr("data-demo-url"),n=e("#demo-"+t).parents(".one-theme:first");e("iframe").attr("src",o),e(".header_btn_bar .theme-info").attr("data-active-demo-id",t)}else{e(".header_btn_bar .next").removeAttr("style");var o=e("#demo-"+t).attr("data-demo-url"),n=e("#demo-"+t).parents(".one-theme:first");e("iframe").attr("src",o);var s=e("#demo-"+t).closest(".one-theme").prev(".one-theme").find(".preview_link").attr("data-id");e(this).attr("data-demo-id",s),e(".header_btn_bar .next").attr("data-demo-id",a),e(".header_btn_bar .theme-info").attr("data-active-demo-id",t)}e(n).hasClass("installed")?e(".header_btn_bar").find(".preview-install-button").hide():e(".header_btn_bar").find(".preview-install-button").show()}),this.onecom_move_up_toggle=function(){if(0==e(".onecom-move-up").length)return!1;e(window).height()/2<=e(window).scrollTop()?e(".onecom-move-up").addClass("show"):e(".onecom-move-up").removeClass("show")}}(jQuery);